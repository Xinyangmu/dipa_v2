clc;clear;
depth_2x = imread('depth_2x.png');
depth_2x = im2double(depth_2x);

[m1,n1] = size(depth_2x); 
% [deltax, 1- deltax] * Q * [deltay; 1- deltay]

interp_x = 320;
interp_y = 240;

m2 = linspace(1,m1,interp_x);
n2 = linspace(1,n1,interp_y);
P_all = zeros(interp_x,interp_y);

for x = 2:interp_x  
    for y = 2:interp_y

        t1 = m2(x);
        t2 = n2(y);
        t1_c = ceil(t1);
        t2_c = ceil(t2);
        Q = [depth_2x(t1_c-1, t2_c-1), depth_2x(t1_c-1, t2_c);depth_2x(t1_c, t2_c-1), depth_2x(t1_c, t2_c)];
        deltax = t1_c - t1;
        deltay = t2_c - t2;
        P_new = [deltax, 1- deltax] * Q * [deltay; 1- deltay];
        P_all(x,y) = P_new;

    end
end

for x = 1
    for y = 2 : interp_y

       t2 = n2(y);
       t2_c = ceil(t2);
       Q = [depth_2x(1,t2_c-1); depth_2x(1,t2_c)];
       delta = [t2_c-t2, 1+t2-t2_c];
       P_new  = delta*Q;
       P_all(x,y) = P_new;

    end
end

for x = 1
    for y = 2 : interp_y
        
       t2 = n2(y);
       t2_c = ceil(t2);
       Q = [depth_2x(1,t2_c-1); depth_2x(1,t2_c)];
       delta = [t2_c-t2, 1+t2-t2_c];
       P_new  = delta*Q;
       P_all(x,y) = P_new;

    end
end

